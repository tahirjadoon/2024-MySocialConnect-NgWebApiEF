<div>
    <form [formGroup]="registerForm" (ngSubmit)="onRegister()" autocomplete="off">
        <h2 class="text-center text-primary">ReactiveForm Sign up</h2>
        <hr>
        <div class="form-group mb-3">
            <input type="text" class="form-control" formControlName="username" placeholder="Username" [class.is-invalid]="rf['username'].errors && rf['username'].touched">
            <!--can use rf or rf2-->
            <div *ngIf="rf['username'].touched && rf['username'].pristine && rf['username'].dirty && rf['username'].invalid && rf['username'].hasError('required')" class="alert alert-danger py-1 small">User name is required</div>
            <div *ngIf="rf2('username').touched && rf2('username').invalid && rf2('username').hasError('minlength')" class="alert alert-danger py-1 small">User name must be minimum 5 characters</div>
            <div *ngIf="rf2('username').touched && rf2('username').invalid && 
                        !(rf2('username').hasError('required') || rf2('username').hasError('minlength')) && 
                        rf2('username').hasError('userNameAllowed')" class="alert alert-danger py-1 small">User name must be alpha numeric with _ and - are allowed. Number cannot be at start and  _ - should be in the middle</div>
            <div *ngIf="rf2('username').touched && rf2('username').invalid && 
                        !(rf2('username').hasError('required') || rf2('username').hasError('minlength') || rf2('username').hasError('userNameAllowed')) && 
                        rf2('username').hasError('userNameExistAsync')" class="alert alert-danger py-1 small">User name already taken</div>
        </div>
        <div class="form-group mb-3">
            <input type="password" class="form-control" formControlName="password" placeholder="Password" [class.is-invalid]="rf['password'].errors && rf['password'].touched">
            <!--can use rf or rf2-->
            <div *ngIf="rf['password'].touched && rf['password'].invalid && rf['password'].hasError('required')" class="alert alert-danger py-1 small">Password is required</div>
            <div *ngIf="rf2('password').touched && rf2('password').invalid && rf2('password').hasError('minlength')" class="alert alert-danger py-1 small">Password must be minimum 10 characters</div>
            <div *ngIf="rf2('password').touched && rf2('password').invalid && !(rf['password'].hasError('required') || rf2('password').hasError('minlength')) && 
                        rf['password'].hasError('passwordStrength')" class="alert alert-danger py-1 small">Password must have an upper case, lower case, special character, a number and max length 30</div>
        </div>
        <div class="form-group mb-3">
            <input type="password" class="form-control" formControlName="confirmpassword" placeholder="Confirm password" [class.is-invalid]="rf['confirmpassword'].errors && rf['confirmpassword'].touched">
            <!--can use rf or rf2-->
            <div *ngIf="rf['confirmpassword'].touched && rf['confirmpassword'].invalid && rf['confirmpassword'].hasError('required')" class="alert alert-danger py-1 small">Confirm password is required</div>
            <div *ngIf="rf['confirmpassword'].touched && rf['confirmpassword'].invalid && !rf['confirmpassword'].hasError('required') && rf['confirmpassword'].hasError('notMatching')" class="alert alert-danger py-1 small">Passwords do not match</div>
            <div *ngIf="rf['confirmpassword'].touched && rf['confirmpassword'].invalid && !rf['confirmpassword'].hasError('required') && rf['confirmpassword'].hasError('notMatchingTwo')" class="alert alert-danger py-1 small">Passwords do not match - notMatching2</div>
        </div>
        <div class="text-center">
            <button class="btn btn-success me-2" type="submit" [disabled]="registerForm.invalid">Register</button>
            <button class="btn btn-danger" type="button" (click)="onCancel()">Cancel</button>
        </div>
    </form>

    <div class="card mt-2">
        <div class="card-header">Register Form</div>
        <div class="card-body">
            <p>Status: <code>{{ registerForm.status | json }}</code></p>
            <p>Value: <br>
                <code>{{ registerForm.value | json }}</code>
            </p>
        </div>
    </div>

    <div class="card mt-2">
        <div class="card-header">Instructions</div>
        <div class="card-body">
            <ul>
                <li>Username must be Alpha numeric with _ and - are allowed. Number cannot be at start and  _ - should be in the middle</li>
                <li>User name must be minimum 5 characters</li>
                <li>Password must be minimum 10 characters</li>
                <li>Password must have an upper case, lower case, special character, a number and max length 30</li>
                <li>Password and confirm password must match</li>
            </ul>
        </div>
    </div>
</div>
